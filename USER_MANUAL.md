# もちふぃった～リンクマネージャー ユーザーマニュアル

このツールは、VRChat プロジェクト内の各アバターフォルダに散在する `BlenderTools` を「VRChat ルート（VRCRoot）」へ集約し、各アバターからはディレクトリ・シンボリックリンクで参照するように自動整備します。重複配置や更新漏れを防ぎ、ストレージ容量を節約できます。

---

## 対応環境
- Windows 10 / 11
- .NET 8.0 で動作する Windows フォームアプリ

## お約束

自己責任でご利用ください。

**UnityでVRChatプロジェクトを開いていない**状態でご利用ください。

## VRChat プロジェクト側の準備

- 事前にVRChatプロジェクトで導入済みのもちふぃった～からBlenderToolsをダウンロードします
  - 1プロジェクトでダウンロードすればOKです

## 準備（起動方法）

- `mochifitter-link-manager-vx.y.z.zip`を解凍します
- `mochifitter-link-manager.exe`を実行します
- 初回のリンク作成が失敗する場合は、管理者として実行するか、Windows の「開発者モード」を有効化してください（後述）。

---

## クイックスタート

1. アプリを起動します。
2. 「BlenderToolsフォルダパス」横にある「参照」ボタンをクリックし、対象の `BlenderTools` フォルダを選択します。
   - **初回実行**の場合はVRChatプロジェクトフォルダ内の`BlenderTools`フォルダを選択します。
   - **2回目以降**はVRChatプロジェクトフォルダの親フォルダの`BlenderTools`フォルダを選択します。
   - フォルダ名は厳密に `BlenderTools` である必要があります。
   - シンボリックリンクの `BlenderTools` は選択できません（通常フォルダのみ）。
4. 「BlenderToolsをおまとめ」ボタンをクリックします。
5. 進捗ダイアログが表示され、移動・削除・リンク作成の状況がわかります。完了後にサマリ（削除件数／失敗件数／作成リンク数）が表示されます。

---

## このツールが行うこと（簡単な説明）
- `BlenderTools` がアバターディレクトリ配下にある場合、VRCRoot（VRChat プロジェクトのルート）直下へ移動します。
- VRCRoot 配下の他アバターディレクトリに存在する重複した `BlenderTools` の「通常フォルダ」を削除します（既存のリンクは削除しません）。
- 各アバターディレクトリに、VRCRoot 直下の `BlenderTools` へのディレクトリ・シンボリックリンクを作成します。

※ アバターディレクトリの判定は、その直下に `VRC.SDK3A.csproj` が存在するかで行います。

---

## よくある質問・トラブルシューティング
- シンボリックリンク作成に失敗する（権限不足など）
  - 対処1: アプリを「管理者として実行」してください。
  - 対処2: Windows の「開発者モード」を有効化してください。
    - Windows 10: 設定 → 更新とセキュリティ → 開発者向け → 開発者モード をオン
    - Windows 11: 設定 → プライバシーとセキュリティ → 開発者向け → 開発者モード をオン
- `BlenderTools` のフォルダ名が異なる（例: `blender_tools` など）
  - 選択できません。正しいフォルダ名に変更してください。
- データは消えませんか？
  - 本体の `BlenderTools` は VRCRoot に集約され、各アバターからはリンクで参照します。通常フォルダの重複のみ削除します。心配な方は事前にバックアップをおすすめします。

---

## 注意点
- 対象は Windows 環境のみです。
- アバター判定は `VRC.SDK3A.csproj` の有無で行います。プロジェクト構成が異なる場合は正しく認識されないことがあります。
- 既存の `BlenderTools` がシンボリックリンクの場合、それらは削除対象ではありません。

---

## まとめ
「もちふぃった～リンクマネージャー」は `BlenderTools` を 1 か所にまとめ、各アバターからリンクで参照させることで、容量節約・更新の一元化・管理の簡素化を実現します。上記の手順で簡単に整備できます。問題が起きたら「管理者として実行」または「開発者モード」をご確認ください。
